package ${modulePackageName};

import java.io.Serializable;
import java.math.BigDecimal;
import java.time.LocalDate;
import java.time.LocalTime;
import java.time.LocalDateTime;
import java.util.List;
import java.util.Date;

import javax.persistence.Basic;
import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;

import lombok.Getter;
import lombok.Setter;
import lombok.ToString;

/**
 * ${pojoMeta.remark}
 *
 * The persistent class for the ${pojoMeta.table.name} database table.
 * @codgen.generated 自动生成，如需修改，请删除本行
 */
@Entity
@Table(name = "${pojoMeta.table.name}")
@Getter
@Setter
@ToString
public class ${moduleClassName} implements Serializable {

	/**
     * @codgen.generated 自动生成，如需修改，请删除本行
     */
	private static final long serialVersionUID = 1L;

	<%
		for(var i=0;i<pojoMeta.properties.~size;i++){
			// 如果是外键
			if (pojoMeta.properties[i].field.isForeignKey) {
                println('/**');
                println('* ' + pojoMeta.properties[i].title);
                println('*');
                println('* @codgen.generated 自动生成，如需修改，请删除本行');
                println('*/');
                print('@JoinColumn(name = "'+pojoMeta.properties[i].field.name+'", referencedColumnName = "'+pojoMeta.properties[i].field.referencedColumnName+'"');
                if(!pojoMeta.properties[i].field.isNullable) print(', nullable = false');
                println(')');
                print('@ManyToOne(');
                if(!pojoMeta.properties[i].field.isNullable) print('optional = false');
                println(')');
                println('private '+pojoMeta.properties[i].field.referencedTableClassName+' '+pojoMeta.properties[i].field.referencedTableInstanceName+';');
			} else {
                println('/**');
                println('* ' + pojoMeta.properties[i].remark);
                println('*');
                println('* @codgen.generated 自动生成，如需修改，请删除本行');
                println('*/');
                if(pojoMeta.properties[i].name == 'id') {
                    println('@Id');
                }

                println('@Basic(optional = ' + pojoMeta.properties[i].field.isNullable + ')');

                if(pojoMeta.properties[i].classSimpleName != 'BigDecimal') {
                    println('@Column(name = "' + pojoMeta.properties[i].field.name + '", nullable = ' + pojoMeta.properties[i].field.isNullable + ', length=' + pojoMeta.properties[i].field.scale + ')');
                } else {
                    println('@Column(name = "' + pojoMeta.properties[i].field.name + '", nullable = ' + pojoMeta.properties[i].field.isNullable + ', precision=' + pojoMeta.properties[i].field.scale + ', scale = ' + pojoMeta.properties[i].scale + ' )');
                }

                if (pojoMeta.properties[i].classSimpleName=='Date' && strutil.endWith(pojoMeta.properties[i].name,'Time')) {
                    println('@Temporal(TemporalType.DATE)');
                }

                println('private ' + pojoMeta.properties[i].classSimpleName + ' ' + pojoMeta.properties[i].name + ';');
            }
		}
	%>
	
	/**
     * @codgen.generated 自动生成，如需修改，请删除本行
     */
	@Override
	public int hashCode() {
		final int prime = 31;
		int result = 1;
		result = prime * result + ((id == null) ? 0 : id.hashCode());
		return result;
	}

	/**
     * @codgen.generated 自动生成，如需修改，请删除本行
     */
	@Override
	public boolean equals(Object obj) {
		if (this == obj)
			return true;
		if (obj == null)
			return false;
		if (getClass() != obj.getClass())
			return false;
		${pojoMeta.className}Jo other = (${pojoMeta.className}Jo) obj;
		if (id == null) {
			if (other.id != null)
				return false;
		} else if (!id.equals(other.id))
			return false;
		return true;
	}

}